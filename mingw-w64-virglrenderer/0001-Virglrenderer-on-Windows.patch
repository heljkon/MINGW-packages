diff -ru orig/virglrenderer-1.0.1/src/gallium/auxiliary/tgsi/tgsi_text.h src/virglrenderer-1.0.1/src/gallium/auxiliary/tgsi/tgsi_text.h
--- orig/virglrenderer-1.0.1/src/gallium/auxiliary/tgsi/tgsi_text.h
+++ src/virglrenderer-1.0.1/src/gallium/auxiliary/tgsi/tgsi_text.h
@@ -34,6 +34,9 @@
 
 #include "pipe/p_compiler.h"
 
+#ifdef __WIN32__
+#define uint unsigned
+#endif
 struct tgsi_token;
 
 bool
diff -ru orig/virglrenderer-1.0.1/src/mesa/compat/c11/threads_win32.h src/virglrenderer-1.0.1/src/mesa/compat/c11/threads_win32.h
--- orig/virglrenderer-1.0.1/src/mesa/compat/c11/threads_win32.h
+++ src/virglrenderer-1.0.1/src/mesa/compat/c11/threads_win32.h
@@ -175,7 +175,7 @@
     return 0;
 }
 
-static void impl_tss_dtor_invoke()
+static void impl_tss_dtor_invoke(void)
 {
     int i;
     for (i = 0; i < EMULATED_THREADS_TSS_DTOR_SLOTNUM; i++) {
diff -ru orig/virglrenderer-1.0.1/src/virgl_context.c src/virglrenderer-1.0.1/src/virgl_context.c
--- orig/virglrenderer-1.0.1/src/virgl_context.c
+++ src/virglrenderer-1.0.1/src/virgl_context.c
@@ -26,7 +26,9 @@
 
 #include <errno.h>
 
+#ifndef WIN32
 #include "util/libsync.h"
+#endif
 #include "util/os_misc.h"
 #include "util/u_hash_table.h"
 #include "util/u_pointer.h"
diff -ru orig/virglrenderer-1.0.1/src/virgl_util.h src/virglrenderer-1.0.1/src/virgl_util.h
--- orig/virglrenderer-1.0.1/src/virgl_util.h
+++ src/virglrenderer-1.0.1/src/virgl_util.h
@@ -29,6 +29,9 @@
 #include <stdbool.h>
 #include <stdint.h>
 
+#ifdef WIN32
+#include <io.h>
+#endif
 #ifdef HAVE_CONFIG_H
 #include "config.h"
 #endif
diff -ru orig/virglrenderer-1.0.0/src/vrend_blitter.c src/virglrenderer-1.0.0/src/vrend_blitter.c
--- orig/virglrenderer-1.0.0/src/vrend_blitter.c
+++ src/virglrenderer-1.0.0/src/vrend_blitter.c
@@ -92,11 +92,11 @@

 #pragma pack(push,1)
 struct PACKED blit_prog_key {
-   bool is_color: 1;
-   bool is_msaa: 1;
-   bool manual_srgb_decode: 1;
-   bool manual_srgb_encode: 1;
-   enum pipe_texture_target pipe_tex_target: 4;
+   uint8_t is_color: 1;
+   uint8_t is_msaa: 1;
+   uint8_t manual_srgb_decode: 1;
+   uint8_t manual_srgb_encode: 1;
+   uint8_t pipe_tex_target: 4;
    uint8_t num_samples;
    struct {
       bool has_swizzle: 1;
diff -Naur orig/virglrenderer-1.0.1/tests/testvirgl.h src/virglrenderer-1.0.1/tests/testvirgl.h
--- orig/virglrenderer-1.0.1/tests/testvirgl.h  2024-04-17 13:18:54.083082100 +0200
+++ src/virglrenderer-1.0.1/tests/testvirgl.h   2024-04-17 13:18:58.591301100 +0200
@@ -25,6 +25,9 @@
 #ifndef TESTVIRGL_H
 #define TESTVIRGL_H

+#ifdef __WIN32__
+#define uint unsigned
+#endif
 #include "virglrenderer.h"
 #include "pipe/p_state.h"

